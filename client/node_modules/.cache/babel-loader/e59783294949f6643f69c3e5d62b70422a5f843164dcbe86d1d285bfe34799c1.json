{"ast":null,"code":"import React,{useEffect,useMemo,useState}from\"react\";import{useAuth}from\"../AuthContext\";import{api}from\"../api\";import Timer from\"../components/Timer\";import SessionTable from\"../components/SessionTable\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){const{token}=useAuth();const[sessions,setSessions]=useState([]);const[from,setFrom]=useState(\"\");const[to,setTo]=useState(\"\");const[summary,setSummary]=useState({days:[],totalMinutes:0});async function load(){const params=new URLSearchParams();if(from)params.set(\"from\",from);if(to)params.set(\"to\",to);const list=await api(\"/api/sessions?\".concat(params.toString()),{token});setSessions(list);const sum=await api(\"/api/stats/summary?\".concat(params.toString()),{token});setSummary(sum);}useEffect(()=>{load();/* eslint-disable-next-line */},[from,to]);async function handleDelete(id){await api(\"/api/sessions/\".concat(id),{method:\"DELETE\",token});await load();}const totalHrs=useMemo(()=>(summary.totalMinutes/60).toFixed(2),[summary]);return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,minWidth:280},children:[/*#__PURE__*/_jsx(Timer,{onSaved:load}),/*#__PURE__*/_jsx(\"div\",{className:\"spacer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"title\",children:\"Filter\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"label\",{className:\"muted\",children:\"From\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"date\",value:from,onChange:e=>setFrom(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"label\",{className:\"muted\",children:\"To\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"date\",value:to,onChange:e=>setTo(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{style:{alignSelf:\"end\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn secondary\",onClick:()=>{setFrom(\"\");setTo(\"\");},children:\"Clear\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"spacer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"title\",children:\"Summary\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total time: \",/*#__PURE__*/_jsxs(\"strong\",{children:[totalHrs,\" hrs\"]})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"muted\",style:{marginTop:8},children:summary.days.map(d=>/*#__PURE__*/_jsxs(\"li\",{children:[d.date,\": \",(d.minutes/60).toFixed(2),\" hrs\"]},d.date))})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:2,minWidth:360},children:/*#__PURE__*/_jsx(SessionTable,{sessions:sessions,onDelete:handleDelete})})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","useAuth","api","Timer","SessionTable","jsx","_jsx","jsxs","_jsxs","Dashboard","token","sessions","setSessions","from","setFrom","to","setTo","summary","setSummary","days","totalMinutes","load","params","URLSearchParams","set","list","concat","toString","sum","handleDelete","id","method","totalHrs","toFixed","className","children","style","flex","minWidth","onSaved","type","value","onChange","e","target","alignSelf","onClick","marginTop","map","d","date","minutes","onDelete"],"sources":["C:/Users/VAISHANVI/Downloads/study-time-tracker/client/src/pages/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport { useAuth } from \"../AuthContext\";\nimport { api } from \"../api\";\nimport Timer from \"../components/Timer\";\nimport SessionTable from \"../components/SessionTable\";\n\nexport default function Dashboard() {\n  const { token } = useAuth();\n  const [sessions, setSessions] = useState([]);\n  const [from, setFrom] = useState(\"\");\n  const [to, setTo] = useState(\"\");\n  const [summary, setSummary] = useState({ days: [], totalMinutes: 0 });\n\n  async function load() {\n    const params = new URLSearchParams();\n    if (from) params.set(\"from\", from);\n    if (to) params.set(\"to\", to);\n    const list = await api(`/api/sessions?${params.toString()}`, { token });\n    setSessions(list);\n    const sum = await api(`/api/stats/summary?${params.toString()}`, { token });\n    setSummary(sum);\n  }\n\n  useEffect(() => { load(); /* eslint-disable-next-line */ }, [from, to]);\n\n  async function handleDelete(id) {\n    await api(`/api/sessions/${id}`, { method: \"DELETE\", token });\n    await load();\n  }\n\n  const totalHrs = useMemo(() => (summary.totalMinutes / 60).toFixed(2), [summary]);\n\n  return (\n    <div className=\"row\">\n      <div style={{ flex: 1, minWidth: 280 }}>\n        <Timer onSaved={load} />\n        <div className=\"spacer\"></div>\n        <div className=\"card\">\n          <h3 className=\"title\">Filter</h3>\n          <div className=\"row\">\n            <div style={{ flex: 1 }}>\n              <label className=\"muted\">From</label>\n              <input className=\"input\" type=\"date\" value={from} onChange={e => setFrom(e.target.value)} />\n            </div>\n            <div style={{ flex: 1 }}>\n              <label className=\"muted\">To</label>\n              <input className=\"input\" type=\"date\" value={to} onChange={e => setTo(e.target.value)} />\n            </div>\n            <div style={{ alignSelf: \"end\" }}>\n              <button className=\"btn secondary\" onClick={() => { setFrom(\"\"); setTo(\"\"); }}>Clear</button>\n            </div>\n          </div>\n        </div>\n        <div className=\"spacer\"></div>\n        <div className=\"card\">\n          <h3 className=\"title\">Summary</h3>\n          <p>Total time: <strong>{totalHrs} hrs</strong></p>\n          <ul className=\"muted\" style={{ marginTop: 8 }}>\n            {summary.days.map(d => (\n              <li key={d.date}>{d.date}: {(d.minutes/60).toFixed(2)} hrs</li>\n            ))}\n          </ul>\n        </div>\n      </div>\n      <div style={{ flex: 2, minWidth: 360 }}>\n        <SessionTable sessions={sessions} onDelete={handleDelete} />\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
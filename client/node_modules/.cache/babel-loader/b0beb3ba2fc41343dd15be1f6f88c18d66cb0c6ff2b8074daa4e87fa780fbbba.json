{"ast":null,"code":"var _jsxFileName = \"U:\\\\study-time-tracker (2)\\\\study-time-tracker\\\\client\\\\src\\\\pages\\\\Subjects.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useAuth } from \"../AuthContext\";\nimport { api } from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Subjects() {\n  _s();\n  const {\n    token\n  } = useAuth();\n  const [subjects, setSubjects] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [err, setErr] = useState(\"\");\n\n  // Function to fetch subjects from the API\n  async function loadSubjects() {\n    try {\n      const data = await api(\"/api/subjects\", {\n        token\n      });\n      setSubjects(data);\n    } catch (e) {\n      console.error(\"Failed to load subjects\", e);\n    }\n  }\n\n  // Load subjects on component mount\n  useEffect(() => {\n    loadSubjects();\n  }, []);\n\n  // Added Handler for adding a new subject\n  async function handleAdd(e) {\n    e.preventDefault();\n    setErr(\"\");\n    if (!name) {\n      setErr(\"Subject name cannot be empty.\");\n      return;\n    }\n    try {\n      await api(\"/api/subjects\", {\n        method: \"POST\",\n        token,\n        body: {\n          name\n        }\n      });\n      setName(\"\"); // Clear input field\n      await loadSubjects(); // Refresh the list\n    } catch (e) {\n      setErr(e.message || \"Failed to add subject\");\n    }\n  }\n\n  // Handler for deleting a subject\n  async function handleDelete(id) {\n    if (window.confirm(\"Are you sure? Deleting a subject will unassign it from all related sessions.\")) {\n      try {\n        await api(`/api/subjects/${id}`, {\n          method: \"DELETE\",\n          token\n        });\n        await loadSubjects(); // Refresh the list\n      } catch (e) {\n        setErr(e.message || \"Failed to delete subject\");\n      }\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    style: {\n      maxWidth: 600,\n      margin: \"0 auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"title\",\n      children: \"Manage Subjects\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleAdd,\n      className: \"row\",\n      style: {\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input\",\n          placeholder: \"Enter new subject name\",\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        type: \"submit\",\n        children: \"+ Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), err && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"muted\",\n      style: {\n        color: '#dc2626',\n        marginTop: 8\n      },\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spacer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [subjects.map(sub => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        style: {\n          padding: \"12px 0\",\n          borderBottom: '1px solid #1f2937',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 12,\n            height: 12,\n            borderRadius: '50%',\n            backgroundColor: sub.color,\n            marginRight: 12\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            flex: 1\n          },\n          children: sub.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn danger\",\n          onClick: () => handleDelete(sub.id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)]\n      }, sub.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)), subjects.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        children: \"No subjects added yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 35\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(Subjects, \"yaCPh90opjrB6J9nn51AnQ9obIA=\", false, function () {\n  return [useAuth];\n});\n_c = Subjects;\nvar _c;\n$RefreshReg$(_c, \"Subjects\");","map":{"version":3,"names":["React","useEffect","useState","useAuth","api","jsxDEV","_jsxDEV","Subjects","_s","token","subjects","setSubjects","name","setName","err","setErr","loadSubjects","data","e","console","error","handleAdd","preventDefault","method","body","message","handleDelete","id","window","confirm","className","style","maxWidth","margin","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","alignItems","flex","placeholder","value","onChange","target","type","color","marginTop","map","sub","padding","borderBottom","width","height","borderRadius","backgroundColor","marginRight","onClick","length","_c","$RefreshReg$"],"sources":["U:/study-time-tracker (2)/study-time-tracker/client/src/pages/Subjects.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useAuth } from \"../AuthContext\";\r\nimport { api } from \"../api\";\r\n\r\nexport default function Subjects() {\r\n  const { token } = useAuth();\r\n  const [subjects, setSubjects] = useState([]);\r\n  const [name, setName] = useState(\"\");\r\n  const [err, setErr] = useState(\"\");\r\n\r\n  // Function to fetch subjects from the API\r\n  async function loadSubjects() {\r\n    try {\r\n      const data = await api(\"/api/subjects\", { token });\r\n      setSubjects(data);\r\n    } catch (e) {\r\n      console.error(\"Failed to load subjects\", e);\r\n    }\r\n  }\r\n\r\n  // Load subjects on component mount\r\n  useEffect(() => { loadSubjects();}, []);\r\n\r\n  // Added Handler for adding a new subject\r\n  async function handleAdd(e) {\r\n    e.preventDefault();\r\n    setErr(\"\");\r\n    if (!name) {\r\n      setErr(\"Subject name cannot be empty.\");\r\n      return;\r\n    }\r\n    try {\r\n      await api(\"/api/subjects\", { method: \"POST\", token, body: { name } });\r\n      setName(\"\"); // Clear input field\r\n      await loadSubjects(); // Refresh the list\r\n    } catch (e) {\r\n      setErr(e.message || \"Failed to add subject\");\r\n    }\r\n  }\r\n  \r\n  // Handler for deleting a subject\r\n  async function handleDelete(id) {\r\n    if (window.confirm(\"Are you sure? Deleting a subject will unassign it from all related sessions.\")) {\r\n      try {\r\n        await api(`/api/subjects/${id}`, { method: \"DELETE\", token });\r\n        await loadSubjects(); // Refresh the list\r\n      } catch (e) {\r\n        setErr(e.message || \"Failed to delete subject\");\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"card\" style={{ maxWidth: 600, margin: \"0 auto\" }}>\r\n      <h2 className=\"title\">Manage Subjects</h2>\r\n      <form onSubmit={handleAdd} className=\"row\" style={{ alignItems: 'center' }}>\r\n        <div style={{ flex: 1 }}>\r\n          <input \r\n            className=\"input\" \r\n            placeholder=\"Enter new subject name\" \r\n            value={name} \r\n            onChange={e => setName(e.target.value)} \r\n          />\r\n        </div>\r\n        <button className=\"btn\" type=\"submit\">+ Add</button>\r\n      </form>\r\n      {err && <p className=\"muted\" style={{color: '#dc2626', marginTop: 8}}>{err}</p>}\r\n      <div className=\"spacer\"></div>\r\n      <div>\r\n        {subjects.map(sub => (\r\n          <div key={sub.id} className=\"row\" style={{ padding: \"12px 0\", borderBottom: '1px solid #1f2937', alignItems: 'center' }}>\r\n            <div style={{ width: 12, height: 12, borderRadius: '50%', backgroundColor: sub.color, marginRight: 12 }}></div>\r\n            <span style={{ flex: 1 }}>{sub.name}</span>\r\n            <button className=\"btn danger\" onClick={() => handleDelete(sub.id)}>Delete</button>\r\n          </div>\r\n        ))}\r\n        {subjects.length === 0 && <p className=\"muted\">No subjects added yet.</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useAuth}from\"../AuthContext\";import{api}from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Timer(_ref){let{onSaved}=_ref;const{token}=useAuth();const[seconds,setSeconds]=useState(0);const[running,setRunning]=useState(false);const[title,setTitle]=useState(\"\");const[notes,setNotes]=useState(\"\");const intervalRef=useRef(null);useEffect(()=>{if(running){intervalRef.current=setInterval(()=>setSeconds(s=>s+1),1000);}else if(intervalRef.current){clearInterval(intervalRef.current);}return()=>clearInterval(intervalRef.current);},[running]);function fmt(n){const h=Math.floor(n/3600).toString().padStart(2,\"0\");const m=Math.floor(n%3600/60).toString().padStart(2,\"0\");const s=Math.floor(n%60).toString().padStart(2,\"0\");return\"\".concat(h,\":\").concat(m,\":\").concat(s);}async function saveSession(){const mins=Math.max(1,Math.round(seconds/60));const body={title:title||\"Study Session\",durationMinutes:mins,notes};await api(\"/api/sessions\",{method:\"POST\",token,body});setSeconds(0);setRunning(false);setTitle(\"\");setNotes(\"\");onSaved===null||onSaved===void 0?void 0:onSaved();}return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"title\",children:\"Timer\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,fontWeight:700,letterSpacing:2},children:fmt(seconds)}),/*#__PURE__*/_jsx(\"div\",{className:\"spacer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>setRunning(r=>!r),children:running?\"Pause\":\"Start\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn secondary\",onClick:()=>{setSeconds(0);setRunning(false);},children:\"Reset\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:saveSession,disabled:seconds<5,children:\"Save Session\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"spacer\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",placeholder:\"Title (optional)\",value:title,onChange:e=>setTitle(e.target.value)}),/*#__PURE__*/_jsx(\"div\",{className:\"spacer\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",placeholder:\"Notes (optional)\",rows:3,value:notes,onChange:e=>setNotes(e.target.value)})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","useAuth","api","jsx","_jsx","jsxs","_jsxs","Timer","_ref","onSaved","token","seconds","setSeconds","running","setRunning","title","setTitle","notes","setNotes","intervalRef","current","setInterval","s","clearInterval","fmt","n","h","Math","floor","toString","padStart","m","concat","saveSession","mins","max","round","body","durationMinutes","method","className","children","style","fontSize","fontWeight","letterSpacing","onClick","r","disabled","placeholder","value","onChange","e","target","rows"],"sources":["C:/Users/VAISHANVI/Downloads/study-time-tracker/client/src/components/Timer.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useAuth } from \"../AuthContext\";\nimport { api } from \"../api\";\n\nexport default function Timer({ onSaved }) {\n  const { token } = useAuth();\n  const [seconds, setSeconds] = useState(0);\n  const [running, setRunning] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [notes, setNotes] = useState(\"\");\n  const intervalRef = useRef(null);\n\n  useEffect(() => {\n    if (running) {\n      intervalRef.current = setInterval(() => setSeconds(s => s + 1), 1000);\n    } else if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n    }\n    return () => clearInterval(intervalRef.current);\n  }, [running]);\n\n  function fmt(n) {\n    const h = Math.floor(n / 3600).toString().padStart(2, \"0\");\n    const m = Math.floor((n % 3600) / 60).toString().padStart(2, \"0\");\n    const s = Math.floor(n % 60).toString().padStart(2, \"0\");\n    return `${h}:${m}:${s}`;\n  }\n\n  async function saveSession() {\n    const mins = Math.max(1, Math.round(seconds / 60));\n    const body = { title: title || \"Study Session\", durationMinutes: mins, notes };\n    await api(\"/api/sessions\", { method: \"POST\", token, body });\n    setSeconds(0); setRunning(false); setTitle(\"\"); setNotes(\"\");\n    onSaved?.();\n  }\n\n  return (\n    <div className=\"card\">\n      <h3 className=\"title\">Timer</h3>\n      <div style={{ fontSize: 48, fontWeight: 700, letterSpacing: 2 }}>{fmt(seconds)}</div>\n      <div className=\"spacer\"></div>\n      <div className=\"row\">\n        <button className=\"btn\" onClick={() => setRunning(r => !r)}>{running ? \"Pause\" : \"Start\"}</button>\n        <button className=\"btn secondary\" onClick={() => { setSeconds(0); setRunning(false); }}>Reset</button>\n        <button className=\"btn\" onClick={saveSession} disabled={seconds < 5}>Save Session</button>\n      </div>\n      <div className=\"spacer\"></div>\n      <input className=\"input\" placeholder=\"Title (optional)\" value={title} onChange={e => setTitle(e.target.value)} />\n      <div className=\"spacer\"></div>\n      <textarea className=\"textarea\" placeholder=\"Notes (optional)\" rows={3} value={notes} onChange={e => setNotes(e.target.value)}></textarea>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}